{"version":3,"sources":["ui/Dropdown/Dropdown.tsx","ui/Slider/Slider.tsx","ui/SliderSection/SliderSection.tsx","ascii-utils.tsx","video/process-video.ts","ui/Menu/DragDropFiles.tsx","ui/Menu/Menu.tsx","video/asciiVideo.tsx","App.tsx","reportWebVitals.js","index.js"],"names":["Dropdown","label","options","selectedOption","onOptionChange","className","onChange","option","value","styles","control","baseStyles","state","minHeight","alignItems","width","menuIsOpen","borderRadius","padding","dropdownIndicator","input","components","IndicatorSeparator","menuPosition","find","Slider","title","min","max","step","disabled","Error","normalizedValue","Math","floor","leftDashes","repeat","rightDashes","type","e","parseFloat","target","SliderSection","specs","onSpecsChange","onResolutionChange","contrast","onContrastChange","resolution","toString","slice","newZoom","zoom","newWeight","weight","newContrast","newKerning","kerning","getAsciiFromContext","context","asciiChars","inverse","imageData","getImageData","canvas","height","greyscale","getGreyscale","ascii","getAsciiFromGreyscale","data","pixels","y","greyscaleRow","x","pixelIndex","luminance","push","length","contrastedLuminance","asciiIndex","processVideoFrames","video","palette","asciiResolution","isColorInverted","onVideoFramesChange","Promise","resolve","onloadedmetadata","document","createElement","getContext","willReadFrequently","frames","aspectRatio","videoWidth","videoHeight","processFrame","drawImage","frameAscii","paused","ended","currentTime","duration","setTimeout","play","DragDropFiles","children","onDrop","preventDefault","stopPropagation","dataTransfer","file","files","onDragOver","ASCIICHARS","asciiOptions","map","char","Menu","onCopy","onImageUpload","onVideoUpload","onPaletteChange","onColorInvertedToggle","isVideoEditMode","imageUploadHandler","imageFile","heic2any","blob","toType","then","convertedBlob","convertedFile","File","name","replace","error","console","htmlFor","id","accept","event","myFile","videoFile","Fonts","font","fontFamily","checked","onClick","MenuContainer","props","onAsciiChange","React","useState","currentFile","setCurrentFile","isAsciiVideo","setIsAsciiVideo","selectedPalette","setSelectedPalette","setInvert","setContrast","setIsVideoEditMode","useRef","setLoadingStateIfVideo","isVideo","updateAscii","resetLookups","src","URL","createObjectURL","settings","maxWidth","reader","FileReader","image","Image","ok","no","match","onload","readerEvent","maxHeight","resize","result","readAsDataURL","resizeImage","current","newAscii","debouncedOnResolutionChange","debounce","debouncedOnContrastChange","getFirstFrameOfVideo","firstFrame","newPalette","AsciiVideo","asciiFrames","frameRate","currentFrameIndex","setCurrentFrameIndex","useEffect","interval","setInterval","prevIndex","clearInterval","App","setAscii","fontSize","lineHeight","setSpecs","log","navigator","clipboard","writeText","JSON","stringify","style","fontWeight","letterSpacing","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.bd5a4594.chunk.js","sourcesContent":["import React from 'react';\nimport CreatableSelect from 'react-select/creatable';\n\ninterface DropdownProps<T> {\n    label: string;\n    options: {\n        value: T;\n        label: T;\n    }[];\n    selectedOption: T;\n    onOptionChange: (option: T) => void;\n}\n\nconst Dropdown = <T,>({\n    label,\n    options,\n    selectedOption,\n    onOptionChange,\n}: DropdownProps<T>): JSX.Element => {\n    return (\n        <div className=\"menu-entry\">\n            <div className=\"menu-entry-label\">{label}:</div>\n            <CreatableSelect\n                options={options}\n                className=\"dropdown\"\n                onChange={(option) => onOptionChange(option?.value || options[0].value)}\n                styles={{\n                    control: (baseStyles, state) => ({\n                        ...baseStyles,\n                        minHeight: '5px !important',\n                        alignItems: 'baseline',\n                        width: state.menuIsOpen ? '200px' : '100px',\n                        borderRadius: '2px',\n                        padding: '0px',\n                    }),\n                    dropdownIndicator: (baseStyles, state) => ({\n                        ...baseStyles,\n                        padding: '0px',\n                    }),\n                    input: (baseStyles, state) => ({\n                        ...baseStyles,\n                        padding: '0px',\n                    }),\n                }}\n                components={{ IndicatorSeparator: () => null }}\n                menuPosition=\"fixed\"\n                value={options.find((option) => option.value === selectedOption)}\n            />\n        </div>\n    );\n};\n\nexport default Dropdown;\n","import React from 'react';\n\ninterface SliderProps {\n    title: string;\n    onChange: (newValue: number) => void;\n    label: string;\n    // eslint-disable-next-line\n    value: any;\n    min: number;\n    max: number;\n    step?: number;\n    disabled?: boolean;\n}\n\nexport const Slider: React.FC<SliderProps> = ({\n    title,\n    onChange,\n    label,\n    value,\n    min,\n    max,\n    step,\n    disabled,\n}) => {\n    const sliderLength = 10;\n    if (value > max || value < min) {\n        throw new Error(`value ${value} is outside of range ${min} to ${max}`);\n    }\n\n    const normalizedValue = Math.floor(((value - min) / (max - min)) * sliderLength);\n\n    const leftDashes = '-'.repeat(normalizedValue);\n    const rightDashes = '-'.repeat(sliderLength - normalizedValue);\n\n    return (\n        <div className=\"slidecontainer\">\n            <p>{title}</p>\n            <div className=\"slider-track\">\n                <input\n                    type=\"range\"\n                    min={min}\n                    max={max}\n                    step={step}\n                    value={value}\n                    onChange={(e) => onChange(parseFloat(e.target.value))}\n                    disabled={disabled}\n                    className=\"slider-input\"\n                />\n                {`<`}\n                <span className=\"slider-dashes\">{leftDashes}</span>\n                <span className=\"slider-asterix\">*</span>\n                <span className=\"slider-dashes\">{rightDashes}</span>\n                {`>`}\n                {/* <output>{value}</output> */}\n            </div>\n        </div>\n    );\n};\n","import { Slider } from '../Slider/Slider';\nimport React from 'react';\nimport { SpecsState } from '../../App';\nimport { on } from 'events';\n\nexport const SliderSection: React.FC<{\n    specs: SpecsState;\n    onSpecsChange: (specs: SpecsState) => void;\n    onResolutionChange: (resolution: number) => void;\n    contrast: number;\n    onContrastChange: (contrast: number) => void;\n}> = ({ specs, onSpecsChange, onResolutionChange, contrast, onContrastChange }) => {\n    // TODO: consider using an exponential scale for resolution\n    return (\n        <>\n            <Slider\n                title={'resolution:'}\n                onChange={(resolution) => {\n                    onResolutionChange(resolution);\n                }}\n                value={specs.resolution}\n                min={5}\n                max={500}\n                label={specs.resolution.toString().slice(0, 5)}\n            />\n\n            <Slider\n                title={'zoom:'}\n                onChange={(newZoom) => {\n                    onSpecsChange({ ...specs, zoom: newZoom });\n                }}\n                value={specs.zoom}\n                min={1}\n                max={10}\n                step={0.25}\n                label={specs.zoom.toString().slice(0, 4)}\n            />\n\n            <Slider\n                title={'weight:'}\n                onChange={(newWeight) => {\n                    onSpecsChange({ ...specs, weight: newWeight });\n                }}\n                value={specs.weight}\n                min={0}\n                max={800}\n                label={specs.weight.toString()}\n            />\n\n            <Slider\n                title={'contrast:'}\n                onChange={(newContrast) => {\n                    onContrastChange(newContrast);\n                }}\n                value={contrast}\n                min={0.1}\n                max={50}\n                step={0.1}\n                label={contrast.toString()}\n            />\n\n            <Slider\n                title={'kerning:'}\n                onChange={(newKerning) => {\n                    onSpecsChange({ ...specs, kerning: newKerning });\n                }}\n                value={specs.kerning}\n                min={-10}\n                max={10}\n                label={specs.kerning.toString()}\n            />\n            {/* <Slider\n                title={'line height:'}\n                onChange={(newLineHeight) => {\n                    onSpecsChange({ ...specs, lineHeight: newLineHeight });\n                }}\n                value={specs.lineHeight}\n                min={0.1}\n                max={200}\n                step={0.1}\n                label={specs.lineHeight.toString()}\n            /> */}\n        </>\n    );\n};\n","// const asciiChars = '+::`..';\n// const asciiChars =\n//     '$@WgBMQNR8%0&đD#OGKEHdbmSqpAPwU54ZX96f23kVhaeFCj1IoJyst7}{YnulzriTx?][*Lcv×<>)(/+=÷“”!;:‘,’-.';\n\n// const asciiChars = '▓▒▒░░';\n// const asciiChars = ['8 ', 'M ', '0 ', '# ', '$ ', '| ', '* ', '+ ', ': ', ': ', '` ', '. ', '. '];\n\n// const asciiChars = '$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/|()1{}[]?-_+~<>i!lI;:,\"^`\\'.';\n// const asciiChars = '+-:`  ';\n['8 ', 'M ', '0 ', '# ', '$ ', '| ', '* ', '+ ', ': ', ': ', '` ', '. ', '. '];\n\n// export const ASCIICHARS = [\n//     '8M0|*|::`,.',\n//     '+::`..',\n//     '+-:`  ',\n//     '▓▒▒░░',\n//     '$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/|()1{}[]?-_+~<>i!lI;:,\"^`\\'.',\n//     '$@WgBMQNR8%0&đD#OGKEHdbmSqpAPwU54ZX96f23kVhaeFCj1IoJyst7}{YnulzriTx?][*Lcv×<>)(/+=÷“”!;:‘,’-.',\n// ];\n\n// const asciiChars = '8M0#$|*|::`,.';\n// const asciiChars = '#8?0+:.,';\n// const asciiChars = '8#|:.';\n\nexport const getAsciiFromContext = (\n    context: CanvasRenderingContext2D,\n    asciiChars: string | string[],\n    inverse = false,\n    contrast?: number,\n): string => {\n    const imageData = context.getImageData(0, 0, context.canvas.width, context.canvas.height);\n    const greyscale = getGreyscale(imageData);\n    const ascii = getAsciiFromGreyscale(greyscale, asciiChars, inverse, contrast);\n    return ascii;\n};\n\nexport const getGreyscale = (data: ImageData): number[][] => {\n    const pixels = data.data;\n\n    const greyscale = [];\n    for (let y = 0; y < data.height; y++) {\n        const greyscaleRow = [];\n        for (let x = 0; x < data.width; x++) {\n            const pixelIndex = (y * data.width + x) * 4;\n            // perceived luminance acccording to https://en.wikipedia.org/wiki/Relative_luminance\n            const luminance =\n                0.2126 * pixels[pixelIndex] +\n                0.7152 * pixels[pixelIndex + 1] +\n                0.0722 * pixels[pixelIndex + 2];\n\n            greyscaleRow.push(luminance);\n        }\n        greyscale.push(greyscaleRow);\n    }\n    return greyscale;\n};\n\nexport const getAsciiFromGreyscale = (\n    greyscale: number[][],\n    asciiChars: string | string[],\n    inverse = false,\n    contrast?: number,\n): string => {\n    let ascii = '';\n\n    // iterate over each row, and each pixel in the row\n    for (let y = 0; y < greyscale.length; y++) {\n        for (let x = 0; x < greyscale[y].length; x++) {\n            const luminance = greyscale[y][x];\n\n            const contrastedLuminance = contrast\n                ? Math.max(Math.min((luminance - 127.5) * contrast, 255), 0)\n                : luminance;\n\n            const asciiIndex = Math.floor((contrastedLuminance / 255) * (asciiChars.length - 1));\n            if (inverse) {\n                ascii += asciiChars[asciiChars.length - asciiIndex - 1];\n            } else {\n                ascii += asciiChars[asciiIndex];\n            }\n        }\n        ascii += '\\n';\n    }\n    return ascii;\n};\n\nconst resize = (image: HTMLImageElement, maxHeight: number, canvas: HTMLCanvasElement) => {\n    let width = image.width;\n    let height = image.height;\n\n    if (height > maxHeight) {\n        width *= maxHeight / height;\n        height = maxHeight;\n    }\n    // 0.6 because the ascii characters are taller than they are wide\n    height *= 0.6;\n\n    canvas.width = width;\n    canvas.height = height;\n    const context = canvas.getContext('2d');\n    context?.drawImage(image, 0, 0, width, height);\n    return canvas;\n};\n\ninterface IResizeImageOptions {\n    maxWidth: number;\n    file: File;\n}\n\n// Returns a Canvas with the image resized to be under MaxHeight\nexport const resizeImage = (settings: IResizeImageOptions): Promise<HTMLCanvasElement> => {\n    const file = settings.file;\n    const maxWidth = settings.maxWidth;\n    const reader = new FileReader();\n    const image = new Image();\n    const canvas = document.createElement('canvas');\n\n    return new Promise<HTMLCanvasElement>((ok, no) => {\n        if (!file.type.match(/image.*/)) {\n            no(new Error('Not an image'));\n            return;\n        }\n\n        reader.onload = (readerEvent: any) => {\n            image.onload = () => ok(resize(image, maxWidth, canvas));\n            image.src = readerEvent.target.result;\n        };\n        reader.readAsDataURL(file);\n    });\n};\n","import { getAsciiFromContext } from '../ascii-utils';\n\nexport const processVideoFrames = async (\n    video: HTMLVideoElement,\n    palette: string | string[],\n    asciiResolution: number,\n    isColorInverted: boolean,\n    onVideoFramesChange: (frame: string[]) => void,\n    contrast: number,\n) => {\n    // Wait for video metadata to load\n    await new Promise<void>((resolve) => {\n        video.onloadedmetadata = () => {\n            resolve();\n        };\n    });\n\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d', {\n        willReadFrequently: true,\n    });\n    if (!context || !video) return;\n\n    const frames: string[] = [];\n\n    const frameRate = 10; // Number of frames per second (adjust this based on performance)\n\n    // Calculate the width and height for processing based on the original video's aspect ratio\n    const aspectRatio = video.videoWidth / video.videoHeight;\n\n    const width = asciiResolution;\n    // 0.6 because the ascii characters are taller than they are wide\n    const height = (0.6 * width) / aspectRatio;\n\n    // Set the canvas dimensions to match the processing size\n    context.canvas.width = width;\n    context.canvas.height = height;\n\n    const processFrame = async () => {\n        context.drawImage(video, 0, 0, width, height);\n        const frameAscii = getAsciiFromContext(context, palette, isColorInverted, contrast);\n        frames.push(frameAscii);\n\n        if (!video.paused && !video.ended && !(video.currentTime >= video.duration)) {\n            setTimeout(processFrame, 1000 / frameRate);\n            video.currentTime += 1 / frameRate;\n        } else {\n            // Video processing is done\n            onVideoFramesChange(frames);\n        }\n    };\n\n    // Start video playback and frame processing\n    video.currentTime = 0;\n    await video.play();\n    processFrame();\n};\n\nexport async function getFirstFrameOfVideo(\n    video: HTMLVideoElement,\n    palette: string | string[],\n    asciiResolution: number,\n    isColorInverted: boolean,\n    contrast: number,\n): Promise<string> {\n    await new Promise<void>((resolve) => {\n        video.onloadedmetadata = () => {\n            resolve();\n        };\n    });\n\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d', {\n        willReadFrequently: true,\n    });\n    if (!context || !video) return '';\n\n    // Calculate the width and height for processing based on the original video's aspect ratio\n    const aspectRatio = video.videoWidth / video.videoHeight;\n\n    const width = asciiResolution;\n    // 0.6 because the ascii characters are taller than they are wide\n    const height = (0.6 * width) / aspectRatio;\n\n    // Set the canvas dimensions to match the processing size\n    context.canvas.width = width;\n    context.canvas.height = height;\n\n    video.currentTime = 0;\n    await video.play();\n\n    const processFrame = async () => {\n        context.drawImage(video, 0, 0, width, height);\n        const frameAscii = getAsciiFromContext(context, palette, isColorInverted, contrast);\n        return frameAscii;\n    };\n\n    // Start video playback and frame processing\n    video.currentTime = 0;\n    await video.play();\n    return processFrame();\n}\n","import React, { ReactElement } from 'react';\n\n// wrapper around children to allow drag and drop of files\nexport const DragDropFiles = ({\n    children,\n    onDrop,\n}: {\n    children: React.ReactNode;\n    onDrop: (file: File) => void;\n}): ReactElement => {\n    const onDropHandler = (e: any) => {\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.dataTransfer) {\n            const file = e.dataTransfer.files[0];\n            onDrop(file);\n        }\n    };\n\n    const onDragOverHandler = (e: any) => e.preventDefault();\n\n    return (\n        <div onDrop={onDropHandler} onDragOver={onDragOverHandler}>\n            {children}\n        </div>\n    );\n};\n","import { ReactElement } from 'react';\nimport Dropdown from '../Dropdown/Dropdown';\nimport { SliderSection } from '../SliderSection/SliderSection';\nimport { Font, Fonts, SpecsState } from '../../App';\nimport heic2any from 'heic2any';\nimport React from 'react';\nimport { getFirstFrameOfVideo, processVideoFrames } from '../../video/process-video';\nimport { debounce, set, slice } from 'lodash';\nimport { getAsciiFromGreyscale, getGreyscale, resizeImage } from '../../ascii-utils';\nimport './menu.css';\nimport { DragDropFiles } from './DragDropFiles';\n\nexport const ASCIICHARS = [\n    '8M0|*|::`,.',\n    'M80*|:,.` ',\n    '$H2a?+.   ',\n    '8+::`..',\n    '+-:`  ',\n    '▓▒▒░░ ',\n    '░▒▓▔▕▖▗▘▙▚▛▜▝▞▟ ',\n    '░▒▓█▄▀│┤╣║╚╔╗╝┐╩└╦╠┴═┬├╬─┼┘┌¦┼└┴┬├┐',\n    '$@WgBMQNR8%0&đD#OGKEHdbmSqpAPwU54ZX96f23kVhaeFCj1IoJyst7}{YnulzriTx?][*Lcv×<>)(/+=÷“”!;:‘,’-.',\n    ['8 ', 'M ', '0 ', '# ', '$ ', '| ', '* ', '+ ', ': ', ': ', '` ', '. ', '. '],\n];\n\nconst asciiOptions = ASCIICHARS.map((char) => ({ value: char, label: char }));\n\ninterface MenuContainerProps {\n    onAsciiChange: (ascii: string | string[], resolution: number) => void;\n    specs: SpecsState;\n    onSpecsChange: (specs: SpecsState) => void;\n    onCopy: () => void;\n}\n\n// extend MenuContainerProps\ninterface MenuProps extends Omit<MenuContainerProps, 'onAsciiChange'> {\n    onImageUpload: (file: File) => void;\n    onVideoUpload: (video: File) => void;\n    onResolutionChange: (resolution: number) => void;\n    palette: string | string[];\n    onPaletteChange: (palette: string | string[]) => void;\n    isColorInverted: boolean;\n    onColorInvertedToggle: () => void;\n    contrast: number;\n    onContrastChange: (contrast: number) => void;\n    // textColor: string;\n    // onTextColorChange: (color: string) => void;`\n    // backgroundColor: string;\n    // onBackgroundColorChange: (color: string) => void;\n    isVideoEditMode: boolean;\n}\n\nconst Menu = ({\n    specs,\n    onSpecsChange,\n    onCopy,\n    onImageUpload,\n    onVideoUpload,\n    onResolutionChange,\n    palette,\n    onPaletteChange,\n    isColorInverted,\n    onColorInvertedToggle,\n    contrast,\n    onContrastChange,\n    isVideoEditMode,\n}: // textColor,\n// onTextColorChange,\n// backgroundColor,\n// onBackgroundColorChange,\nMenuProps): ReactElement => {\n    const imageUploadHandler = (imageFile: File) => {\n        if (imageFile.type === 'image/heic') {\n            // Convert HEIC image to JPEG format\n            try {\n                heic2any({\n                    blob: imageFile,\n                    toType: 'image/jpeg',\n                }).then((convertedBlob) => {\n                    const convertedFile = new File(\n                        [convertedBlob as Blob],\n                        imageFile.name.replace('.heic', '.jpg'),\n                        { type: 'image/jpeg' },\n                    );\n\n                    // Continue processing with the converted image\n                    onImageUpload(convertedFile);\n                });\n\n                // Create a new File instance with the converted blob\n            } catch (error) {\n                console.error('Error converting HEIC image:', error);\n            }\n        } else {\n            onImageUpload(imageFile);\n        }\n    };\n\n    return (\n        <DragDropFiles onDrop={imageUploadHandler}>\n            <div className=\"menu\">\n                <div className=\"menu-entry\">\n                    <label htmlFor=\"file-upload\" className=\"clickable-button\">\n                        Upload an image\n                    </label>\n                    <input\n                        id=\"file-upload\"\n                        type=\"file\"\n                        accept=\"image/*, .heic\"\n                        onChange={(event) => {\n                            const myFile = event.target.files?.[0];\n                            if (!myFile) {\n                                return;\n                            }\n                            imageUploadHandler(myFile);\n                        }}\n                    />\n                </div>\n                <div className=\"menu-entry\">\n                    <label htmlFor=\"video-upload\" className=\"clickable-button\">\n                        Upload a video\n                    </label>\n                    <input\n                        id=\"video-upload\"\n                        type=\"file\"\n                        accept=\"video/*\"\n                        onChange={(event) => {\n                            const videoFile = event.target.files?.[0];\n                            if (!videoFile) {\n                                return;\n                            }\n                            onVideoUpload(videoFile);\n                        }}\n                    />\n                </div>\n                <SliderSection\n                    specs={specs}\n                    onSpecsChange={onSpecsChange}\n                    onResolutionChange={onResolutionChange}\n                    contrast={contrast}\n                    onContrastChange={onContrastChange}\n                />\n                <Dropdown\n                    label=\"palette\"\n                    options={asciiOptions}\n                    selectedOption={palette}\n                    onOptionChange={onPaletteChange}\n                />\n\n                <Dropdown\n                    label=\"font\"\n                    options={Fonts.map((font: Font) => ({ value: font, label: font }))}\n                    selectedOption={specs.fontFamily}\n                    onOptionChange={(font) => {\n                        onSpecsChange({ ...specs, fontFamily: font as Font });\n                    }}\n                />\n                {isVideoEditMode ? (\n                    <>\n                        <label className={'clickable-button'}>Generate video!</label>\n                        <span className=\"highlighted-element\">!!</span>\n                    </>\n                ) : (\n                    <>\n                        <form>\n                            <div className=\"menu-entry\">\n                                <div className=\"checkboxes\">\n                                    <label>\n                                        <input\n                                            type=\"checkbox\"\n                                            checked={isColorInverted}\n                                            onChange={onColorInvertedToggle}\n                                        />\n                                        {'inverse?'}\n                                    </label>\n                                </div>\n                            </div>\n                        </form>\n\n                        <div className=\"menu-entry\">\n                            <label htmlFor=\"clipboard-button\" className=\"clickable-button\">\n                                Save to clipboard\n                            </label>\n\n                            <button\n                                id=\"clipboard-button\"\n                                className=\"hidden-button\"\n                                onClick={onCopy}>\n                                {'save to clipboard'}\n                            </button>\n                        </div>\n                    </>\n                )}\n            </div>\n        </DragDropFiles>\n    );\n};\n\nexport const MenuContainer = (props: MenuContainerProps): ReactElement => {\n    const { specs, onAsciiChange, onSpecsChange } = props;\n\n    const [currentFile, setCurrentFile] = React.useState<File>();\n    const [isAsciiVideo, setIsAsciiVideo] = React.useState(false);\n    const [selectedPalette, setSelectedPalette] = React.useState<string | string[]>(ASCIICHARS[0]);\n    const [isColorInverted, setInvert] = React.useState(false);\n    const [contrast, setContrast] = React.useState(1);\n    const [isVideoEditMode, setIsVideoEditMode] = React.useState(false);\n\n    const video = document.createElement('video');\n\n    // store greyscale so it can be a lookup table\n    const greyscale = React.useRef<number[][]>([]);\n\n    const setLoadingStateIfVideo = (isVideo: boolean) => {\n        if (isVideo) {\n            onAsciiChange('loading...', specs.resolution);\n        }\n    };\n\n    const updateAscii = ({\n        palette,\n        isColorInverted,\n        resolution,\n        file,\n        isVideo,\n        contrast,\n        resetLookups = false,\n    }: {\n        palette: string | string[];\n        isColorInverted: boolean;\n        resolution: number;\n        file: File | undefined;\n        isVideo: boolean;\n        contrast: number;\n        resetLookups?: boolean;\n    }) => {\n        if (!file) {\n            return;\n        }\n\n        if (isVideo) {\n            video.src = URL.createObjectURL(file);\n\n            processVideoFrames(\n                video,\n                palette,\n                resolution,\n                isColorInverted,\n                (frames) => onAsciiChange(frames, resolution),\n                contrast,\n            );\n        } else {\n            resizeImage({\n                file: file,\n                maxWidth: resolution,\n            }).then((canvas) => {\n                const context = canvas.getContext('2d', {\n                    willReadFrequently: true,\n                });\n                const data = context?.getImageData(0, 0, canvas.width, canvas.height);\n                if (!data) {\n                    return;\n                }\n\n                // avoid recalculating greyscale for each frame\n                if (resetLookups) {\n                    greyscale.current = getGreyscale(data);\n                }\n\n                const newAscii = getAsciiFromGreyscale(\n                    greyscale.current,\n                    palette,\n                    isColorInverted,\n                    contrast,\n                );\n\n                onAsciiChange(newAscii, resolution);\n                // TODO: this causes unnecessary state updates, but it makes the resolution change\n                // look smoothest. Maybe there's a better way to do this?\n                onSpecsChange({\n                    ...specs,\n                    resolution: resolution,\n                });\n            });\n        }\n    };\n\n    const debouncedOnResolutionChange = debounce((resolution: number) => {\n        setLoadingStateIfVideo(isAsciiVideo);\n        updateAscii({\n            palette: selectedPalette,\n            isColorInverted,\n            resolution,\n            file: currentFile,\n            isVideo: isAsciiVideo,\n            contrast,\n            resetLookups: true,\n        });\n    }, 5);\n\n    const debouncedOnContrastChange = debounce((contrast: number) => {\n        setLoadingStateIfVideo(isAsciiVideo);\n        setContrast(contrast);\n        updateAscii({\n            palette: selectedPalette,\n            isColorInverted,\n            resolution: specs.resolution,\n            file: currentFile,\n            isVideo: isAsciiVideo,\n            contrast,\n        });\n    }, 5);\n\n    const handleVideoUpload = (videoFile: File) => {\n        {\n            video.src = URL.createObjectURL(videoFile);\n            setIsVideoEditMode(true);\n\n            getFirstFrameOfVideo(\n                video,\n                selectedPalette,\n                specs.resolution,\n                isColorInverted,\n                contrast,\n            ).then((firstFrame) => {\n                // add the string \"hello\" to the start of the string\n                const annotation =\n                    \"here's the first frame of the video! \\n you can set the configurations to your liking and then click 'generate video' to generate the video! \\n\";\n\n                onAsciiChange(annotation + firstFrame, specs.resolution);\n            });\n            // setIsAsciiVideo(true);\n            // setLoadingStateIfVideo(true);\n            // updateAscii({\n            //     palette: selectedPalette,\n            //     isColorInverted,\n            //     resolution: specs.resolution,\n            //     file: videoFile,\n            //     isVideo: true,\n            //     contrast,\n            //     resetLookups: true,\n            // });\n            // setCurrentFile(videoFile);\n        }\n    };\n    return (\n        <Menu\n            {...props}\n            onResolutionChange={debouncedOnResolutionChange}\n            onImageUpload={(imageFile) => {\n                setIsAsciiVideo(false);\n                updateAscii({\n                    palette: selectedPalette,\n                    isColorInverted,\n                    resolution: specs.resolution,\n                    file: imageFile,\n                    isVideo: false,\n                    contrast,\n                    resetLookups: true,\n                });\n                setCurrentFile(imageFile);\n            }}\n            onVideoUpload={handleVideoUpload}\n            palette={selectedPalette}\n            onPaletteChange={(newPalette) => {\n                setSelectedPalette(newPalette);\n                setLoadingStateIfVideo(isAsciiVideo);\n                updateAscii({\n                    palette: newPalette,\n                    isColorInverted,\n                    resolution: specs.resolution,\n                    file: currentFile,\n                    isVideo: isAsciiVideo,\n                    contrast,\n                });\n            }}\n            isColorInverted={isColorInverted}\n            onColorInvertedToggle={() => {\n                setInvert(!isColorInverted);\n                setLoadingStateIfVideo(isAsciiVideo);\n                updateAscii({\n                    palette: selectedPalette,\n                    isColorInverted: !isColorInverted,\n                    resolution: specs.resolution,\n                    file: currentFile,\n                    isVideo: isAsciiVideo,\n                    contrast,\n                });\n            }}\n            contrast={contrast}\n            onContrastChange={debouncedOnContrastChange}\n            isVideoEditMode={isVideoEditMode}\n        />\n    );\n};\n","import React from 'react';\n\nexport const AsciiVideo = ({\n    asciiFrames,\n    frameRate = 10,\n}: {\n    asciiFrames: string[];\n    // the frame rate to play the video at (has nothing to do with video creation)\n    frameRate?: number;\n}): JSX.Element | null => {\n    if (asciiFrames.length == 0) {\n        return null;\n    }\n    const [currentFrameIndex, setCurrentFrameIndex] = React.useState(0);\n\n    React.useEffect(() => {\n        const interval = setInterval(() => {\n            setCurrentFrameIndex((prevIndex) => (prevIndex + 1) % asciiFrames.length);\n        }, 1000 / frameRate);\n\n        return () => clearInterval(interval);\n    }, [asciiFrames.length, frameRate]);\n\n    return <div>{asciiFrames[currentFrameIndex]}</div>;\n};\n","import './index.css';\nimport React from 'react';\nimport { MenuContainer as Menu } from './ui/Menu/Menu';\nimport { AsciiVideo } from './video/asciiVideo';\n\n//rewrite as enum?\n\nexport const Fonts = [\n    'Ibm Plex Mono',\n    'Azeret Mono',\n    'Space Mono',\n    'Roboto Mono',\n    'Courier New',\n    'Monaco',\n    'Arial',\n    'Helvetica',\n];\n\nexport type Font = (typeof Fonts)[number];\n\nexport interface SpecsState {\n    fontSize: number;\n    resolution: number;\n    width: number;\n    zoom: number;\n    weight: number;\n    fontFamily: Font;\n    kerning: number;\n    lineHeight: number;\n}\n\nconst App: React.FC = () => {\n    const [ascii, setAscii] = React.useState<string | string[]>('');\n    const [specs, setSpecs] = React.useState<SpecsState>({\n        fontSize: 30,\n        resolution: 100,\n        width: 700,\n        zoom: 1,\n        weight: 400,\n        fontFamily: 'Ibm Plex Mono',\n        kerning: 0,\n        lineHeight: 1,\n    });\n    console.log('specs', specs);\n\n    const lineHeight = 1000 / specs.resolution;\n\n    return (\n        <div className=\"flex-container\">\n            <Menu\n                specs={specs}\n                onSpecsChange={(specs: SpecsState) => setSpecs(specs)}\n                onAsciiChange={(ascii: string | string[]) => setAscii(ascii)}\n                onCopy={() => {\n                    navigator.clipboard.writeText(\n                        typeof ascii === 'string' ? ascii : JSON.stringify(ascii),\n                    );\n                }}\n            />\n            <pre>\n                <div\n                    className=\"ascii\"\n                    style={{\n                        fontSize: `${lineHeight * 1 * specs.zoom}px`,\n                        lineHeight: `${lineHeight * specs.zoom}px`,\n                        fontWeight: specs.weight,\n                        fontFamily: specs.fontFamily,\n                        letterSpacing: `${specs.kerning}px`,\n                    }}>\n                    {ascii !== '' ? (\n                        typeof ascii === 'string' ? (\n                            ascii\n                        ) : (\n                            <AsciiVideo asciiFrames={ascii} />\n                        )\n                    ) : (\n                        '{(-.-)/^'\n                    )}\n                </div>\n            </pre>\n        </div>\n    );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}