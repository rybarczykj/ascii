(this["webpackJsonpascii-gen"]=this["webpackJsonpascii-gen"]||[]).push([[0],{15:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(20),r=n.n(i),c=(n(15),n(4)),s=n(1),l=n(23),u=n(2),d=function(e){var t=e.label,n=e.options,o=e.selectedOption,a=e.onOptionChange;return Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsxs)("div",{className:"menu-entry-label",children:[t,":"]}),Object(u.jsx)(l.a,{options:n,className:"dropdown",onChange:function(e){return a((null===e||void 0===e?void 0:e.value)||n[0].value)},styles:{control:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{minHeight:"5px !important",alignItems:"baseline",width:t.menuIsOpen?"200px":"100px",borderRadius:"2px",padding:"0px"})},dropdownIndicator:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{padding:"0px"})},input:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{padding:"0px"})}},components:{IndicatorSeparator:function(){return null}},menuPosition:"fixed",value:n.find((function(e){return e.value===o}))})]})},h=function(e){var t=e.title,n=e.onChange,o=(e.label,e.value),a=e.min,i=e.max,r=e.step,c=e.disabled;if(o>i||o<a)throw new Error("value ".concat(o," is outside of range ").concat(a," to ").concat(i));var s=Math.floor((o-a)/(i-a)*10),l="-".repeat(s),d="-".repeat(10-s);return Object(u.jsxs)("div",{className:"slidecontainer",children:[Object(u.jsx)("p",{children:t}),Object(u.jsxs)("div",{className:"slider-track",children:[Object(u.jsx)("input",{type:"range",min:a,max:i,step:r,value:o,onChange:function(e){return n(parseFloat(e.target.value))},disabled:c,className:"slider-input"}),"<",Object(u.jsx)("span",{className:"slider-dashes",children:l}),Object(u.jsx)("span",{className:"slider-asterix",children:"*"}),Object(u.jsx)("span",{className:"slider-dashes",children:d}),">"]})]})},p=function(e){var t=e.specs,n=e.onSpecsChange,o=e.onResolutionChange,a=e.contrast,i=e.onContrastChange;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h,{title:"resolution:",onChange:function(e){o(e)},value:t.resolution,min:5,max:500,label:t.resolution.toString().slice(0,5)}),Object(u.jsx)(h,{title:"zoom:",onChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{zoom:e}))},value:t.zoom,min:1,max:10,step:.25,label:t.zoom.toString().slice(0,4)}),Object(u.jsx)(h,{title:"weight:",onChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{weight:e}))},value:t.weight,min:0,max:800,label:t.weight.toString()}),Object(u.jsx)(h,{title:"contrast:",onChange:function(e){i(e)},value:a,min:.1,max:20,step:.1,label:a.toString()}),Object(u.jsx)(h,{title:"kerning:",onChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{kerning:e}))},value:t.kerning,min:-10,max:10,label:t.kerning.toString()})]})},g=n(21),b=n.n(g),f=n(3),j=n(6),v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=e.getImageData(0,0,e.canvas.width,e.canvas.height),i=m(a),r=O(i,t,n,o);return r},m=function(e){for(var t=e.data,n=[],o=0;o<e.height;o++){for(var a=[],i=0;i<e.width;i++){var r=4*(o*e.width+i),c=.2126*t[r]+.7152*t[r+1]+.0722*t[r+2];a.push(c)}n.push(a)}return n},O=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a="",i=0;i<e.length;i++){for(var r=0;r<e[i].length;r++){var c=e[i][r],s=o?Math.max(Math.min((c-127.5)*o,255),0):c,l=Math.floor(s/255*(t.length-1));a+=n?t[t.length-l-1]:t[l]}a+="\n"}return a},x=function(){var e=Object(j.a)(Object(f.a)().mark((function e(t,n,o,a,i,r){var c,s,l,u,d,h,p;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.onloadedmetadata=function(){e()}}));case 2:if(c=document.createElement("canvas"),(s=c.getContext("2d",{willReadFrequently:!0}))&&t){e.next=6;break}return e.abrupt("return");case 6:return l=[],10,u=t.videoWidth/t.videoHeight,h=.6*(d=o)/u,s.canvas.width=d,s.canvas.height=h,p=function(){var e=Object(j.a)(Object(f.a)().mark((function e(){var o;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.drawImage(t,0,0,d,h),o=v(s,n,a,r),l.push(o),t.paused||t.ended||t.currentTime>=t.duration?i(l):(setTimeout(p,100),t.currentTime+=.1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.currentTime=0,e.next=17,t.play();case 17:p();case 18:case"end":return e.stop()}}),e)})));return function(t,n,o,a,i,r){return e.apply(this,arguments)}}(),C=n(22),w=(n(58),function(e){var t=e.children,n=e.onDrop;return Object(u.jsx)("div",{onDrop:function(e){if(e.preventDefault(),e.stopPropagation(),e.dataTransfer){var t=e.dataTransfer.files[0];n(t)}},onDragOver:function(e){return e.preventDefault()},children:t})}),y=["8M0|*|::`,.","M80*|:,.` ","$H2a?+.   ","8+::`..","+-:`  ","\u2593\u2592\u2592\u2591\u2591 ","$@WgBMQNR8%0&\u0111D#OGKEHdbmSqpAPwU54ZX96f23kVhaeFCj1IoJyst7}{YnulzriTx?][*Lcv\xd7<>)(/+=\xf7\u201c\u201d!;:\u2018,\u2019-.",["8 ","M ","0 ","# ","$ ","| ","* ","+ ",": ",": ","` ",". ",". "]],I=y.map((function(e){return{value:e,label:e}})),S=function(e){var t=e.specs,n=e.onSpecsChange,o=e.onCopy,a=e.onImageUpload,i=e.onVideoUpload,r=e.onResolutionChange,c=e.palette,l=e.onPaletteChange,h=e.isColorInverted,g=e.onColorInvertedToggle,f=e.contrast,j=e.onContrastChange,v=function(e){if("image/heic"===e.type)try{b()({blob:e,toType:"image/jpeg"}).then((function(t){var n=new File([t],e.name.replace(".heic",".jpg"),{type:"image/jpeg"});a(n)}))}catch(t){console.error("Error converting HEIC image:",t)}else a(e)};return Object(u.jsx)(w,{onDrop:v,children:Object(u.jsxs)("div",{className:"menu",children:[Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsx)("label",{htmlFor:"file-upload",className:"clickable-button",children:"Upload an image"}),Object(u.jsx)("input",{id:"file-upload",type:"file",accept:"image/*, .heic",onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&v(n)}})]}),Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsx)("label",{htmlFor:"video-upload",className:"clickable-button",children:"Upload a video"}),Object(u.jsx)("input",{id:"video-upload",type:"file",accept:"video/*",onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&i(n)}})]}),Object(u.jsx)(p,{specs:t,onSpecsChange:n,onResolutionChange:r,contrast:f,onContrastChange:j}),Object(u.jsx)(d,{label:"palette",options:I,selectedOption:c,onOptionChange:l}),Object(u.jsx)(d,{label:"font",options:F.map((function(e){return{value:e,label:e}})),selectedOption:t.fontFamily,onOptionChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{fontFamily:e}))}}),Object(u.jsx)("form",{children:Object(u.jsx)("div",{className:"menu-entry",children:Object(u.jsx)("div",{className:"checkboxes",children:Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{type:"checkbox",checked:h,onChange:g}),"inverse?"]})})})}),Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsx)("label",{htmlFor:"clipboard-button",className:"clickable-button",children:"Save to clipboard"}),Object(u.jsx)("button",{id:"clipboard-button",className:"hidden-button",onClick:o,children:"save to clipboard"})]})]})})},N=function(e){var t=e.specs,n=e.onAsciiChange,o=(e.onSpecsChange,a.a.useState()),i=Object(c.a)(o,2),r=i[0],l=i[1],d=a.a.useState(!1),h=Object(c.a)(d,2),p=h[0],g=h[1],b=a.a.useState(y[0]),f=Object(c.a)(b,2),j=f[0],v=f[1],w=a.a.useState(!1),I=Object(c.a)(w,2),N=I[0],k=I[1],F=a.a.useState(1),R=Object(c.a)(F,2),M=R[0],T=R[1],P=document.createElement("video"),z=a.a.useRef([]);console.log("selectedPalette",j);var D=function(e){var t=e.palette,o=e.isColorInverted,a=e.resolution,i=e.file,r=e.isVideo,c=e.contrast,s=e.resetLookups,l=void 0!==s&&s;i&&(console.log("file",i),r?(P.src=URL.createObjectURL(i),x(P,t,a,o,(function(e){return n(e,a)}),c)):function(e){var t=e.file,n=e.maxWidth,o=new FileReader,a=new Image,i=document.createElement("canvas");return new Promise((function(e,r){t.type.match(/image.*/)?(o.onload=function(t){a.onload=function(){return e(function(e,t,n){var o=e.width,a=e.height;a>t&&(o*=t/a,a=t),a*=.6,n.width=o,n.height=a;var i=n.getContext("2d");return null===i||void 0===i||i.drawImage(e,0,0,o,a),n}(a,n,i))},a.src=t.target.result},o.readAsDataURL(t)):r(new Error("Not an image"))}))}({file:i,maxWidth:a}).then((function(e){var i=e.getContext("2d",{willReadFrequently:!0}),r=null===i||void 0===i?void 0:i.getImageData(0,0,e.width,e.height);if(r){l&&(z.current=m(r));var s=O(z.current,t,o,c);n(s,a)}})))},E=Object(C.debounce)((function(e){D({palette:j,isColorInverted:N,resolution:e,file:r,isVideo:p,contrast:M,resetLookups:!0})}),5);return Object(u.jsx)(S,Object(s.a)(Object(s.a)({},e),{},{onResolutionChange:E,onImageUpload:function(e){g(!1),D({palette:j,isColorInverted:N,resolution:t.resolution,file:e,isVideo:!1,contrast:M,resetLookups:!0}),l(e)},onVideoUpload:function(e){g(!0),D({palette:j,isColorInverted:N,resolution:t.resolution,file:e,isVideo:!0,contrast:M,resetLookups:!0}),l(e)},palette:j,onPaletteChange:function(e){v(e),D({palette:e,isColorInverted:N,resolution:t.resolution,file:r,isVideo:p,contrast:M})},isColorInverted:N,onColorInvertedToggle:function(){k(!N),D({palette:j,isColorInverted:!N,resolution:t.resolution,file:r,isVideo:p,contrast:M})},contrast:M,onContrastChange:function(e){T(e),D({palette:j,isColorInverted:N,resolution:t.resolution,file:r,isVideo:p,contrast:e})}}))},k=function(e){var t=e.asciiFrames,n=e.frameRate,o=void 0===n?10:n;if(0==t.length)return null;var i=a.a.useState(0),r=Object(c.a)(i,2),s=r[0],l=r[1];return a.a.useEffect((function(){var e=setInterval((function(){l((function(e){return(e+1)%t.length}))}),1e3/o);return function(){return clearInterval(e)}}),[t.length,o]),Object(u.jsx)("div",{children:t[s]})},F=["Ibm Plex Mono","Azeret Mono","Space Mono","Roboto Mono","Courier New","Monaco"],R=function(){var e=a.a.useState(""),t=Object(c.a)(e,2),n=t[0],o=t[1],i=a.a.useState({fontSize:30,resolution:100,width:700,zoom:1,weight:400,fontFamily:"Ibm Plex Mono",kerning:0,lineHeight:1}),r=Object(c.a)(i,2),s=r[0],l=r[1];console.log("specs",s);var d=1e3/s.resolution;return Object(u.jsxs)("div",{className:"flex-container",children:[Object(u.jsx)(N,{specs:s,onSpecsChange:function(e){return l(e)},onAsciiChange:function(e){return o(e)},onCopy:function(){navigator.clipboard.writeText("string"===typeof n?n:JSON.stringify(n))}}),Object(u.jsx)("pre",{children:Object(u.jsx)("div",{className:"ascii",style:{fontSize:"".concat(1*d*s.zoom,"px"),lineHeight:"".concat(d*s.zoom,"px"),fontWeight:s.weight,fontFamily:s.fontFamily,letterSpacing:"".concat(s.kerning,"px")},children:""!==n?"string"===typeof n?n:Object(u.jsx)(k,{asciiFrames:n}):"{(-.-)/^"})})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),i(e),r(e)}))};r.a.createRoot(document.getElementById("root")).render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(R,{})})),M()}},[[59,1,2]]]);
//# sourceMappingURL=main.21f94a1f.chunk.js.map