(this["webpackJsonpascii-gen"]=this["webpackJsonpascii-gen"]||[]).push([[0],{16:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(21),r=n.n(i),s=(n(16),n(4)),c=n(1),l=n(23),u=n(2),d=function(e){var t=e.label,n=e.options,o=e.selectedOption,a=e.onOptionChange;return Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsxs)("div",{className:"menu-entry-label",children:[t,":"]}),Object(u.jsx)(l.a,{options:n,className:"dropdown",onChange:function(e){return a((null===e||void 0===e?void 0:e.value)||n[0].value)},styles:{control:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{minHeight:"5px !important",alignItems:"baseline",width:t.menuIsOpen?"200px":"100px",borderRadius:"2px",padding:"0px"})},dropdownIndicator:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{padding:"0px"})},input:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{padding:"0px"})}},components:{IndicatorSeparator:function(){return null}},menuPosition:"fixed",value:n.find((function(e){return e.value===o}))})]})},h=function(e){var t=e.title,n=e.onChange,o=(e.label,e.value),a=e.min,i=e.max,r=e.step,s=e.disabled;if(o>i||o<a)throw new Error("value ".concat(o," is outside of range ").concat(a," to ").concat(i));var c=Math.floor((o-a)/(i-a)*10),l="-".repeat(c),d="-".repeat(10-c);return Object(u.jsxs)("div",{className:"slidecontainer",children:[Object(u.jsx)("p",{children:t}),Object(u.jsxs)("div",{className:"slider-track",children:[Object(u.jsx)("input",{type:"range",min:a,max:i,step:r,value:o,onChange:function(e){return n(parseFloat(e.target.value))},disabled:s,className:"slider-input"}),"<",Object(u.jsx)("span",{className:"slider-dashes",children:l}),Object(u.jsx)("span",{className:"slider-asterix",children:"*"}),Object(u.jsx)("span",{className:"slider-dashes",children:d}),">"]})]})},b=function(e){var t=e.specs,n=e.onSpecsChange,o=e.onResolutionChange,a=e.contrast,i=e.onContrastChange,r=e.brightness,s=e.onBrightnessChange;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h,{title:"resolution:",onChange:function(e){o(e)},value:t.resolution,min:5,max:500,label:t.resolution.toString().slice(0,5)}),Object(u.jsx)(h,{title:"contrast:",onChange:function(e){i(e)},value:a,min:.1,max:50,step:.1,label:a.toString()}),Object(u.jsx)(h,{title:"brightness:",onChange:function(e){s(e)},value:r,min:-255,max:255,step:1,label:r.toString()}),Object(u.jsx)(h,{title:"zoom:",onChange:function(e){n(Object(c.a)(Object(c.a)({},t),{},{zoom:e}))},value:t.zoom,min:1,max:10,step:.25,label:t.zoom.toString().slice(0,4)}),Object(u.jsx)(h,{title:"font weight:",onChange:function(e){n(Object(c.a)(Object(c.a)({},t),{},{weight:e}))},value:t.weight,min:0,max:800,label:t.weight.toString()}),Object(u.jsx)(h,{title:"kerning:",onChange:function(e){n(Object(c.a)(Object(c.a)({},t),{},{kerning:e}))},value:t.kerning,min:-10,max:10,label:t.kerning.toString()})]})},g=n(22),p=n.n(g),f=n(3),j=n(5),v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=e.getImageData(0,0,e.canvas.width,e.canvas.height),r=m(i),s=O(r,t,n,o,a);return s},m=function(e){for(var t=e.data,n=[],o=0;o<e.height;o++){for(var a=[],i=0;i<e.width;i++){var r=4*(o*e.width+i),s=.2126*t[r]+.7152*t[r+1]+.0722*t[r+2];a.push(s)}n.push(a)}return n},O=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i="",r=0;r<e.length;r++){for(var s=0;s<e[r].length;s++){var c=e[r][s],l=a?Math.max(Math.min(c+a,255),0):c,u=o?Math.max(Math.min((l-127.5)*o,255),0):l,d=Math.floor(u/255*(t.length-1));i+=n?t[t.length-d-1]:t[d]}i+="\n"}return i},x=function(){var e=Object(j.a)(Object(f.a)().mark((function e(t,n,o,a,i,r,s){var c,l,u,d,h,b,g;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.onloadedmetadata=function(){e()}}));case 2:if(c=document.createElement("canvas"),(l=c.getContext("2d",{willReadFrequently:!0}))&&t){e.next=6;break}return e.abrupt("return");case 6:return u=[],10,d=t.videoWidth/t.videoHeight,b=.6*(h=o)/d,l.canvas.width=h,l.canvas.height=b,g=function(){var e=Object(j.a)(Object(f.a)().mark((function e(){var o;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.drawImage(t,0,0,h,b),o=v(l,n,a,r,s),u.push(o),t.paused||t.ended||t.currentTime>=t.duration?i(u):(setTimeout(g,100),t.currentTime+=.1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.currentTime=0,e.next=17,t.play();case 17:g();case 18:case"end":return e.stop()}}),e)})));return function(t,n,o,a,i,r,s){return e.apply(this,arguments)}}();function C(){return C=Object(j.a)(Object(f.a)().mark((function e(t){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=document.createElement("canvas"),o=n.getContext("2d");o?(t.addEventListener("loadeddata",(function(){n.width=t.videoWidth,n.height=t.videoHeight;t.addEventListener("canplaythrough",(function a(){t.play(),t.currentTime=.001,o.drawImage(t,0,0,n.width,n.height),setTimeout((function(){n.toBlob(function(){var t=Object(j.a)(Object(f.a)().mark((function t(n){var o;return Object(f.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return e(null),t.abrupt("return");case 3:o=new File([n],"first-frame.jpeg",{type:"image/jpeg"}),e(o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),"image/jpeg"),t.removeEventListener("canplaythrough",a)}),1e3)}))})),t.readyState>=2&&t.dispatchEvent(new Event("loadeddata"))):e(null)})));case 1:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}var w=n(13),y=(n(58),function(e){var t=e.children,n=e.onDrop;return Object(u.jsx)("div",{onDrop:function(e){if(e.preventDefault(),e.stopPropagation(),e.dataTransfer){var t=e.dataTransfer.files[0];n(t)}},onDragOver:function(e){return e.preventDefault()},children:t})}),k=["8M0|*|::`,.","M80*|:,.` ","$H2a?+.   ","8+::`..","+-:`  ","\u2593\u2592\u2592\u2591\u2591 ","\u2591\u2592\u2593\u2594\u2595\u2596\u2597\u2598\u2599\u259a\u259b\u259c\u259d\u259e\u259f ","\u2591\u2592\u2593\u2588\u2584\u2580\u2502\u2524\u2563\u2551\u255a\u2554\u2557\u255d\u2510\u2569\u2514\u2566\u2560\u2534\u2550\u252c\u251c\u256c\u2500\u253c\u2518\u250c\xa6\u253c\u2514\u2534\u252c\u251c\u2510","$@WgBMQNR8%0&\u0111D#OGKEHdbmSqpAPwU54ZX96f23kVhaeFCj1IoJyst7}{YnulzriTx?][*Lcv\xd7<>)(/+=\xf7\u201c\u201d!;:\u2018,\u2019-.",["8 ","M ","0 ","# ","$ ","| ","* ","+ ",": ",": ","` ",". ",". "]],I=k.map((function(e){return{value:e,label:e}})),S=function(e){var t=e.specs,n=e.onSpecsChange,o=e.onCopy,a=e.onImageUpload,i=e.onVideoUpload,r=e.onResolutionChange,s=e.palette,l=e.onPaletteChange,h=e.isColorInverted,g=e.onColorInvertedToggle,f=e.contrast,j=e.onContrastChange,v=e.isVideoEditMode,m=e.onClickGenerateVideo,O=e.brightness,x=e.onBrightnessChange,C=function(e){if("image/heic"===e.type)try{p()({blob:e,toType:"image/jpeg"}).then((function(t){var n=new File([t],e.name.replace(".heic",".jpg"),{type:"image/jpeg"});a(n)}))}catch(t){console.error("Error converting HEIC image:",t)}else a(e)};return Object(u.jsx)(y,{onDrop:C,children:Object(u.jsxs)("div",{className:"flex-row",children:[Object(u.jsxs)("div",{className:"menu",children:[Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsx)("label",{htmlFor:"file-upload",className:"clickable-button",children:"Upload an image"}),Object(u.jsx)("input",{id:"file-upload",type:"file",accept:"image/*, .heic",onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&C(n)}})]}),Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsx)("label",{htmlFor:"video-upload",className:"clickable-button",children:"Upload a video"}),Object(u.jsx)("input",{id:"video-upload",type:"file",accept:"video/*",onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&i(n)}})]}),Object(u.jsx)(b,{specs:t,onSpecsChange:n,onResolutionChange:r,contrast:f,onContrastChange:j,brightness:O,onBrightnessChange:x}),Object(u.jsx)(d,{label:"palette",options:I,selectedOption:s,onOptionChange:l}),Object(u.jsx)(d,{label:"font",options:L.map((function(e){return{value:e,label:e}})),selectedOption:t.fontFamily,onOptionChange:function(e){n(Object(c.a)(Object(c.a)({},t),{},{fontFamily:e}))}}),Object(u.jsx)("form",{children:Object(u.jsx)("div",{className:"menu-entry",children:Object(u.jsx)("div",{className:"checkboxes",children:Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{type:"checkbox",checked:h,onChange:g}),"inverse?"]})})})}),Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsx)("label",{htmlFor:"clipboard-button",className:"clickable-button",children:"Save to clipboard"}),Object(u.jsx)("button",{id:"clipboard-button",className:"hidden-button",onClick:o})]})]}),v&&Object(u.jsxs)("div",{className:"info-box ",children:["here's the first frame of the video. configure to your liking, then press the button to generate your result \n",Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"generate-video-button",className:"clickable-button",children:"Generate video"}),Object(u.jsx)("button",{id:"generate-video-button",className:"hidden-button",onClick:m}),Object(u.jsx)("span",{className:"highlighted-element",children:"!!"})]})]})]})})},N=function(e){var t=e.specs,n=e.onAsciiChange,o=e.onSpecsChange,i=a.a.useState(),r=Object(s.a)(i,2),l=r[0],d=r[1],h=a.a.useState(!1),b=Object(s.a)(h,2),g=b[0],p=b[1],f=a.a.useState(k[0]),j=Object(s.a)(f,2),v=j[0],y=j[1],I=a.a.useState(!1),N=Object(s.a)(I,2),F=N[0],L=N[1],M=a.a.useState(1),E=Object(s.a)(M,2),R=E[0],V=E[1],T=a.a.useState(0),P=Object(s.a)(T,2),U=P[0],z=P[1],D=a.a.useState(),B=Object(s.a)(D,2),H=B[0],A=B[1],W=document.createElement("video"),G=a.a.useRef([]),J=function(e){e&&n("loading...",t.resolution)},q=function(e){var a=e.palette,i=e.isColorInverted,r=e.resolution,s=e.file,l=e.isVideo,u=e.contrast,d=e.brightness,h=e.resetLookups;s&&(l?(W.src=URL.createObjectURL(s),x(W,a,r,i,(function(e){return n(e,r)}),u,d)):function(e){var t=e.file,n=e.maxWidth,o=new FileReader,a=new Image,i=document.createElement("canvas");return new Promise((function(e,r){t.type.match(/image.*/)?(o.onload=function(t){a.onload=function(){return e(function(e,t,n){var o=e.width,a=e.height;a>t&&(o*=t/a,a=t),a*=.6,n.width=o,n.height=a;var i=n.getContext("2d");return null===i||void 0===i||i.drawImage(e,0,0,o,a),n}(a,n,i))},a.src=t.target.result},o.readAsDataURL(t)):r(new Error("Not an image"))}))}({file:s,maxWidth:r}).then((function(e){var s=e.getContext("2d",{willReadFrequently:!0}),l=null===s||void 0===s?void 0:s.getImageData(0,0,e.width,e.height);if(l){h&&(G.current=m(l));var b=O(G.current,a,i,u,d);n(b,r),o(Object(c.a)(Object(c.a)({},t),{},{resolution:r}))}})))},$=Object(w.debounce)((function(e){J(g),q({palette:v,isColorInverted:F,resolution:e,file:l,isVideo:g,contrast:R,brightness:U,resetLookups:!0})}),5),K=Object(w.debounce)((function(e){J(g),V(e),q({palette:v,isColorInverted:F,resolution:t.resolution,file:l,isVideo:g,contrast:e,brightness:U,resetLookups:!1})}),5),Q=Object(w.debounce)((function(e){J(g),z(e),q({palette:v,isColorInverted:F,resolution:t.resolution,file:l,isVideo:g,contrast:R,brightness:e,resetLookups:!1})}),5);return Object(u.jsx)(S,Object(c.a)(Object(c.a)({},e),{},{onResolutionChange:$,onImageUpload:function(e){p(!1),q({palette:v,isColorInverted:F,resolution:t.resolution,file:e,isVideo:!1,contrast:R,brightness:U,resetLookups:!0}),d(e)},onVideoUpload:function(e){W.src=URL.createObjectURL(e),A(e),p(!1),function(e){return C.apply(this,arguments)}(W).then((function(e){e&&(q({palette:v,isColorInverted:F,resolution:t.resolution,file:e,isVideo:!1,contrast:R,brightness:U,resetLookups:!0}),d(e))}))},palette:v,onPaletteChange:function(e){y(e),J(g),q({palette:e,isColorInverted:F,resolution:t.resolution,file:l,isVideo:g,brightness:U,contrast:R,resetLookups:!1})},isColorInverted:F,onColorInvertedToggle:function(){L(!F),J(g),q({palette:v,isColorInverted:!F,resolution:t.resolution,file:l,isVideo:g,brightness:U,contrast:R,resetLookups:!1})},contrast:R,onContrastChange:K,brightness:U,onBrightnessChange:Q,isVideoEditMode:Boolean(H),onClickGenerateVideo:function(){H&&(p(!0),J(!0),q({palette:v,isColorInverted:F,resolution:t.resolution,file:H,isVideo:!0,contrast:R,brightness:U,resetLookups:!0}),d(H),A(void 0))}}))},F=function(e){var t=e.asciiFrames,n=e.frameRate,o=void 0===n?10:n;if(0==t.length)return null;var i=a.a.useState(0),r=Object(s.a)(i,2),c=r[0],l=r[1];return a.a.useEffect((function(){var e=setInterval((function(){l((function(e){return(e+1)%t.length}))}),1e3/o);return function(){return clearInterval(e)}}),[t.length,o]),Object(u.jsx)("div",{children:t[c]})},L=["Ibm Plex Mono","Azeret Mono","Space Mono","Roboto Mono","Courier New","Monaco","Arial","Helvetica"],M=function(){var e=a.a.useState(""),t=Object(s.a)(e,2),n=t[0],o=t[1],i=a.a.useState({fontSize:30,resolution:100,width:700,zoom:1,weight:400,fontFamily:"Ibm Plex Mono",kerning:0,lineHeight:1}),r=Object(s.a)(i,2),c=r[0],l=r[1];console.log("specs",c);var d=1e3/c.resolution;return console.log("ascii",n.slice(0,100)),Object(u.jsxs)("div",{className:"flex-container",children:[Object(u.jsx)(N,{specs:c,onSpecsChange:function(e){return l(e)},onAsciiChange:function(e){return o(e)},onCopy:function(){navigator.clipboard.writeText("string"===typeof n?n:JSON.stringify(n))}}),Object(u.jsx)("pre",{children:Object(u.jsx)("div",{className:"ascii",style:{fontSize:"".concat(1*d*c.zoom,"px"),lineHeight:"".concat(d*c.zoom,"px"),fontWeight:c.weight,fontFamily:c.fontFamily,letterSpacing:"".concat(c.kerning,"px")},children:""!==n?"string"===typeof n?n:Object(u.jsx)(F,{asciiFrames:n}):"((-.-)/^"})})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),i(e),r(e)}))};r.a.createRoot(document.getElementById("root")).render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(M,{})})),E()}},[[59,1,2]]]);
//# sourceMappingURL=main.91a8b257.chunk.js.map