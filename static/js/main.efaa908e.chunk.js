(this["webpackJsonpascii-gen"]=this["webpackJsonpascii-gen"]||[]).push([[0],{16:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(21),r=n.n(i),c=(n(16),n(4)),s=n(1),l=n(23),u=n(2),d=function(e){var t=e.label,n=e.options,o=e.selectedOption,a=e.onOptionChange;return Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsxs)("div",{className:"menu-entry-label",children:[t,":"]}),Object(u.jsx)(l.a,{options:n,className:"dropdown",onChange:function(e){return a((null===e||void 0===e?void 0:e.value)||n[0].value)},styles:{control:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{minHeight:"5px !important",alignItems:"baseline",width:t.menuIsOpen?"200px":"100px",borderRadius:"2px",padding:"0px"})},dropdownIndicator:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{padding:"0px"})},input:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{padding:"0px"})}},components:{IndicatorSeparator:function(){return null}},menuPosition:"fixed",value:n.find((function(e){return e.value===o}))})]})},h=function(e){var t=e.title,n=e.onChange,o=(e.label,e.value),a=e.min,i=e.max,r=e.step,c=e.disabled;if(o>i||o<a)throw new Error("value ".concat(o," is outside of range ").concat(a," to ").concat(i));var s=Math.floor((o-a)/(i-a)*10),l="-".repeat(s),d="-".repeat(10-s);return Object(u.jsxs)("div",{className:"slidecontainer",children:[Object(u.jsx)("p",{children:t}),Object(u.jsxs)("div",{className:"slider-track",children:[Object(u.jsx)("input",{type:"range",min:a,max:i,step:r,value:o,onChange:function(e){return n(parseFloat(e.target.value))},disabled:c,className:"slider-input"}),"<",Object(u.jsx)("span",{className:"slider-dashes",children:l}),Object(u.jsx)("span",{className:"slider-asterix",children:"*"}),Object(u.jsx)("span",{className:"slider-dashes",children:d}),">"]})]})},p=function(e){var t=e.specs,n=e.onSpecsChange,o=e.onResolutionChange,a=e.contrast,i=e.onContrastChange;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h,{title:"resolution:",onChange:function(e){o(e)},value:t.resolution,min:5,max:500,label:t.resolution.toString().slice(0,5)}),Object(u.jsx)(h,{title:"contrast:",onChange:function(e){i(e)},value:a,min:.1,max:50,step:.1,label:a.toString()}),Object(u.jsx)(h,{title:"zoom:",onChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{zoom:e}))},value:t.zoom,min:1,max:10,step:.25,label:t.zoom.toString().slice(0,4)}),Object(u.jsx)(h,{title:"font weight:",onChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{weight:e}))},value:t.weight,min:0,max:800,label:t.weight.toString()}),Object(u.jsx)(h,{title:"kerning:",onChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{kerning:e}))},value:t.kerning,min:-10,max:10,label:t.kerning.toString()})]})},b=n(22),f=n.n(b),j=n(3),g=n(5),v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=e.getImageData(0,0,e.canvas.width,e.canvas.height),i=m(a),r=O(i,t,n,o);return r},m=function(e){for(var t=e.data,n=[],o=0;o<e.height;o++){for(var a=[],i=0;i<e.width;i++){var r=4*(o*e.width+i),c=.2126*t[r]+.7152*t[r+1]+.0722*t[r+2];a.push(c)}n.push(a)}return n},O=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a="",i=0;i<e.length;i++){for(var r=0;r<e[i].length;r++){var c=e[i][r],s=o?Math.max(Math.min((c-127.5)*o,255),0):c,l=Math.floor(s/255*(t.length-1));a+=n?t[t.length-l-1]:t[l]}a+="\n"}return a},x=function(){var e=Object(g.a)(Object(j.a)().mark((function e(t,n,o,a,i,r){var c,s,l,u,d,h,p;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.onloadedmetadata=function(){e()}}));case 2:if(c=document.createElement("canvas"),(s=c.getContext("2d",{willReadFrequently:!0}))&&t){e.next=6;break}return e.abrupt("return");case 6:return l=[],10,u=t.videoWidth/t.videoHeight,h=.6*(d=o)/u,s.canvas.width=d,s.canvas.height=h,p=function(){var e=Object(g.a)(Object(j.a)().mark((function e(){var o;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.drawImage(t,0,0,d,h),o=v(s,n,a,r),l.push(o),t.paused||t.ended||t.currentTime>=t.duration?i(l):(setTimeout(p,100),t.currentTime+=.1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.currentTime=0,e.next=17,t.play();case 17:p();case 18:case"end":return e.stop()}}),e)})));return function(t,n,o,a,i,r){return e.apply(this,arguments)}}();function C(){return C=Object(g.a)(Object(j.a)().mark((function e(t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=document.createElement("canvas"),o=n.getContext("2d");o?(t.addEventListener("loadeddata",(function(){n.width=t.videoWidth,n.height=t.videoHeight;t.addEventListener("canplaythrough",(function a(){t.play(),t.currentTime=.001,o.drawImage(t,0,0,n.width,n.height),setTimeout((function(){n.toBlob(function(){var t=Object(g.a)(Object(j.a)().mark((function t(n){var o;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return e(null),t.abrupt("return");case 3:o=new File([n],"first-frame.jpeg",{type:"image/jpeg"}),e(o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),"image/jpeg"),t.removeEventListener("canplaythrough",a)}),1e3)}))})),t.readyState>=2&&t.dispatchEvent(new Event("loadeddata"))):e(null)})));case 1:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}var w=n(15),y=(n(58),function(e){var t=e.children,n=e.onDrop;return Object(u.jsx)("div",{onDrop:function(e){if(e.preventDefault(),e.stopPropagation(),e.dataTransfer){var t=e.dataTransfer.files[0];n(t)}},onDragOver:function(e){return e.preventDefault()},children:t})}),k=["8M0|*|::`,.","M80*|:,.` ","$H2a?+.   ","8+::`..","+-:`  ","\u2593\u2592\u2592\u2591\u2591 ","\u2591\u2592\u2593\u2594\u2595\u2596\u2597\u2598\u2599\u259a\u259b\u259c\u259d\u259e\u259f ","\u2591\u2592\u2593\u2588\u2584\u2580\u2502\u2524\u2563\u2551\u255a\u2554\u2557\u255d\u2510\u2569\u2514\u2566\u2560\u2534\u2550\u252c\u251c\u256c\u2500\u253c\u2518\u250c\xa6\u253c\u2514\u2534\u252c\u251c\u2510","$@WgBMQNR8%0&\u0111D#OGKEHdbmSqpAPwU54ZX96f23kVhaeFCj1IoJyst7}{YnulzriTx?][*Lcv\xd7<>)(/+=\xf7\u201c\u201d!;:\u2018,\u2019-.",["8 ","M ","0 ","# ","$ ","| ","* ","+ ",": ",": ","` ",". ",". "]],I=k.map((function(e){return{value:e,label:e}})),N=function(e){var t=e.specs,n=e.onSpecsChange,o=e.onCopy,a=e.onImageUpload,i=e.onVideoUpload,r=e.onResolutionChange,c=e.palette,l=e.onPaletteChange,h=e.isColorInverted,b=e.onColorInvertedToggle,j=e.contrast,g=e.onContrastChange,v=e.isVideoEditMode,m=e.onClickGenerateVideo,O=function(e){if("image/heic"===e.type)try{f()({blob:e,toType:"image/jpeg"}).then((function(t){var n=new File([t],e.name.replace(".heic",".jpg"),{type:"image/jpeg"});a(n)}))}catch(t){console.error("Error converting HEIC image:",t)}else a(e)};return Object(u.jsx)(y,{onDrop:O,children:Object(u.jsxs)("div",{className:"flex-row",children:[Object(u.jsxs)("div",{className:"menu",children:[Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsx)("label",{htmlFor:"file-upload",className:"clickable-button",children:"Upload an image"}),Object(u.jsx)("input",{id:"file-upload",type:"file",accept:"image/*, .heic",onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&O(n)}})]}),Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsx)("label",{htmlFor:"video-upload",className:"clickable-button",children:"Upload a video"}),Object(u.jsx)("input",{id:"video-upload",type:"file",accept:"video/*",onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&i(n)}})]}),Object(u.jsx)(p,{specs:t,onSpecsChange:n,onResolutionChange:r,contrast:j,onContrastChange:g}),Object(u.jsx)(d,{label:"palette",options:I,selectedOption:c,onOptionChange:l}),Object(u.jsx)(d,{label:"font",options:E.map((function(e){return{value:e,label:e}})),selectedOption:t.fontFamily,onOptionChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{fontFamily:e}))}}),Object(u.jsx)("form",{children:Object(u.jsx)("div",{className:"menu-entry",children:Object(u.jsx)("div",{className:"checkboxes",children:Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{type:"checkbox",checked:h,onChange:b}),"inverse?"]})})})}),Object(u.jsxs)("div",{className:"menu-entry",children:[Object(u.jsx)("label",{htmlFor:"clipboard-button",className:"clickable-button",children:"Save to clipboard"}),Object(u.jsx)("button",{id:"clipboard-button",className:"hidden-button",onClick:o})]})]}),v&&Object(u.jsxs)("div",{className:"info-box ",children:["here's the first frame of the video. configure to your liking, then press the button to generate your result \n",Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"generate-video-button",className:"clickable-button",children:"Generate video"}),Object(u.jsx)("button",{id:"generate-video-button",className:"hidden-button",onClick:m}),Object(u.jsx)("span",{className:"highlighted-element",children:"!!"})]})]})]})})},S=function(e){var t=e.specs,n=e.onAsciiChange,o=e.onSpecsChange,i=a.a.useState(),r=Object(c.a)(i,2),l=r[0],d=r[1],h=a.a.useState(!1),p=Object(c.a)(h,2),b=p[0],f=p[1],j=a.a.useState(k[0]),g=Object(c.a)(j,2),v=g[0],y=g[1],I=a.a.useState(!1),S=Object(c.a)(I,2),F=S[0],E=S[1],R=a.a.useState(1),M=Object(c.a)(R,2),L=M[0],T=M[1],V=a.a.useState(),P=Object(c.a)(V,2),U=P[0],z=P[1],D=document.createElement("video"),H=a.a.useRef([]),A=function(e){e&&n("loading...",t.resolution)},W=function(e){var a=e.palette,i=e.isColorInverted,r=e.resolution,c=e.file,l=e.isVideo,u=e.contrast,d=e.resetLookups,h=void 0!==d&&d;c&&(l?(D.src=URL.createObjectURL(c),x(D,a,r,i,(function(e){return n(e,r)}),u)):function(e){var t=e.file,n=e.maxWidth,o=new FileReader,a=new Image,i=document.createElement("canvas");return new Promise((function(e,r){t.type.match(/image.*/)?(o.onload=function(t){a.onload=function(){return e(function(e,t,n){var o=e.width,a=e.height;a>t&&(o*=t/a,a=t),a*=.6,n.width=o,n.height=a;var i=n.getContext("2d");return null===i||void 0===i||i.drawImage(e,0,0,o,a),n}(a,n,i))},a.src=t.target.result},o.readAsDataURL(t)):r(new Error("Not an image"))}))}({file:c,maxWidth:r}).then((function(e){var c=e.getContext("2d",{willReadFrequently:!0}),l=null===c||void 0===c?void 0:c.getImageData(0,0,e.width,e.height);if(l){h&&(H.current=m(l));var d=O(H.current,a,i,u);n(d,r),o(Object(s.a)(Object(s.a)({},t),{},{resolution:r}))}})))},B=Object(w.debounce)((function(e){A(b),W({palette:v,isColorInverted:F,resolution:e,file:l,isVideo:b,contrast:L,resetLookups:!0})}),5),G=Object(w.debounce)((function(e){A(b),T(e),W({palette:v,isColorInverted:F,resolution:t.resolution,file:l,isVideo:b,contrast:e})}),5);return Object(u.jsx)(N,Object(s.a)(Object(s.a)({},e),{},{onResolutionChange:B,onImageUpload:function(e){f(!1),W({palette:v,isColorInverted:F,resolution:t.resolution,file:e,isVideo:!1,contrast:L,resetLookups:!0}),d(e)},onVideoUpload:function(e){D.src=URL.createObjectURL(e),z(e),f(!1),function(e){return C.apply(this,arguments)}(D).then((function(e){e&&(W({palette:v,isColorInverted:F,resolution:t.resolution,file:e,isVideo:!1,contrast:L,resetLookups:!0}),d(e))}))},palette:v,onPaletteChange:function(e){y(e),A(b),W({palette:e,isColorInverted:F,resolution:t.resolution,file:l,isVideo:b,contrast:L})},isColorInverted:F,onColorInvertedToggle:function(){E(!F),A(b),W({palette:v,isColorInverted:!F,resolution:t.resolution,file:l,isVideo:b,contrast:L})},contrast:L,onContrastChange:G,isVideoEditMode:Boolean(U),onClickGenerateVideo:function(){U&&(f(!0),A(!0),W({palette:v,isColorInverted:F,resolution:t.resolution,file:U,isVideo:!0,contrast:L,resetLookups:!0}),d(U),z(void 0))}}))},F=function(e){var t=e.asciiFrames,n=e.frameRate,o=void 0===n?10:n;if(0==t.length)return null;var i=a.a.useState(0),r=Object(c.a)(i,2),s=r[0],l=r[1];return a.a.useEffect((function(){var e=setInterval((function(){l((function(e){return(e+1)%t.length}))}),1e3/o);return function(){return clearInterval(e)}}),[t.length,o]),Object(u.jsx)("div",{children:t[s]})},E=["Ibm Plex Mono","Azeret Mono","Space Mono","Roboto Mono","Courier New","Monaco","Arial","Helvetica"],R=function(){var e=a.a.useState(""),t=Object(c.a)(e,2),n=t[0],o=t[1],i=a.a.useState({fontSize:30,resolution:100,width:700,zoom:1,weight:400,fontFamily:"Ibm Plex Mono",kerning:0,lineHeight:1}),r=Object(c.a)(i,2),s=r[0],l=r[1];console.log("specs",s);var d=1e3/s.resolution;return console.log("ascii",n.slice(0,100)),Object(u.jsxs)("div",{className:"flex-container",children:[Object(u.jsx)(S,{specs:s,onSpecsChange:function(e){return l(e)},onAsciiChange:function(e){return o(e)},onCopy:function(){navigator.clipboard.writeText("string"===typeof n?n:JSON.stringify(n))}}),Object(u.jsx)("pre",{children:Object(u.jsx)("div",{className:"ascii",style:{fontSize:"".concat(1*d*s.zoom,"px"),lineHeight:"".concat(d*s.zoom,"px"),fontWeight:s.weight,fontFamily:s.fontFamily,letterSpacing:"".concat(s.kerning,"px")},children:""!==n?"string"===typeof n?n:Object(u.jsx)(F,{asciiFrames:n}):"((-.-)/^"})})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),i(e),r(e)}))};r.a.createRoot(document.getElementById("root")).render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(R,{})})),M()}},[[59,1,2]]]);
//# sourceMappingURL=main.efaa908e.chunk.js.map